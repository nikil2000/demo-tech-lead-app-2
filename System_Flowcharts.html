<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLT Tech-Lead Partner Platform - System Flowcharts</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            color: #0066CC;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }

        h2 {
            color: #333;
            margin-top: 50px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #0066CC;
            font-size: 1.8rem;
        }

        h3 {
            color: #555;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .diagram-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .mermaid {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 8px;
        }

        .download-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #0066CC;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0, 102, 204, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .download-btn:hover {
            background: #0052A3;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 102, 204, 0.4);
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .info-box h4 {
            color: #1976D2;
            margin-bottom: 10px;
        }

        .info-box ul {
            margin-left: 20px;
            color: #333;
        }

        .info-box li {
            margin: 5px 0;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .container {
                box-shadow: none;
            }
            .download-btn {
                display: none;
            }
        }
    </style>
</head>
<body>
    <a href="#" class="download-btn" onclick="window.print(); return false;">ðŸ“¥ Download as PDF</a>
    
    <div class="container">
        <h1>ðŸš€ SLT Tech-Lead Partner Platform</h1>
        <p class="subtitle">System Flowcharts - Phase 1</p>

        <h2>1. Complete System Flow Diagram</h2>
        <div class="diagram-container">
            <div class="mermaid">
graph TB
    Start([Customer Request]) --> A[Regional Office Receives Request]
    A --> B[Job Logged in ERP System]
    B --> C[Business Support Team Reviews]
    
    C --> D{Assign Job}
    D --> E[Select Tech-Lead Partner]
    D --> F[Select Multiple Partners]
    
    E --> G[Job Published to Mobile App]
    F --> G
    
    G --> H[Partner Receives Notification]
    H --> I{Partner Action}
    
    I -->|Accept| J[Job Status: Accepted]
    I -->|Decline| K[Reassign to Another Partner]
    K --> G
    
    J --> L[Partner Performs On-Site Work]
    L --> M[Partner Marks Job Complete]
    M --> N[Upload Photos & Documents]
    N --> O[Submit for Approval]
    
    O --> P[Admin Receives Notification]
    P --> Q[Admin Reviews Submission]
    Q --> R{Approval Decision}
    
    R -->|Approve| S[Job Status: Approved]
    R -->|Reject| T[Job Status: Rejected]
    
    S --> U[Update ERP via API]
    U --> V[Payment Processing]
    V --> W[Partner Earnings Updated]
    
    T --> X[Rejection Notification to Partner]
    X --> Y{Partner Action}
    Y -->|Resubmit| M
    Y -->|Dispute| Z[Admin Review]
    
    W --> End([Job Closed])
    
    style Start fill:#4CAF50,stroke:#2E7D32,color:#fff
    style End fill:#4CAF50,stroke:#2E7D32,color:#fff
    style S fill:#2196F3,stroke:#1565C0,color:#fff
    style T fill:#F44336,stroke:#C62828,color:#fff
    style G fill:#FF9800,stroke:#E65100,color:#fff
    style U fill:#9C27B0,stroke:#6A1B9A,color:#fff
            </div>
        </div>

        <h2>2. User Role Flow Diagrams</h2>
        
        <h3>Tech-Lead Partner Mobile App Flow</h3>
        <div class="diagram-container">
            <div class="mermaid">
graph LR
    A([Launch App]) --> B{Logged In?}
    B -->|No| C[Login Screen]
    B -->|Yes| D[Job Card Dashboard]
    
    C --> E[Enter Credentials]
    E --> F{Valid?}
    F -->|No| C
    F -->|Yes| D
    
    D --> G[View Available Jobs]
    G --> H{Select Job}
    H --> I[View Job Details]
    
    I --> J{Action}
    J -->|Accept| K[Job Added to My Jobs]
    J -->|Back| G
    
    K --> L[Start Job]
    L --> M[Complete Work]
    M --> N[Upload Photos]
    N --> O[Upload Documents]
    O --> P[Submit for Approval]
    
    P --> Q[Wait for Admin Review]
    Q --> R{Result}
    R -->|Approved| S[Earnings Updated]
    R -->|Rejected| T[View Rejection Reason]
    
    T --> U{Action}
    U -->|Resubmit| N
    U -->|Contact Admin| V[Support]
    
    style A fill:#4CAF50,stroke:#2E7D32,color:#fff
    style D fill:#2196F3,stroke:#1565C0,color:#fff
    style S fill:#4CAF50,stroke:#2E7D32,color:#fff
    style T fill:#F44336,stroke:#C62828,color:#fff
            </div>
        </div>

        <h3>Admin Dashboard Flow</h3>
        <div class="diagram-container">
            <div class="mermaid">
graph TB
    A([Admin Login]) --> B[Dashboard Home]
    B --> C{Select Action}
    
    C -->|Create Job| D[Job Creation Form]
    C -->|View Jobs| E[Job Tracking Dashboard]
    C -->|Reports| F[Analytics & Reports]
    C -->|Settings| G[System Configuration]
    
    D --> H[Enter Job Details]
    H --> I[Select Service Type]
    I --> J[Assign to Partner]
    J --> K[Set Payment & Deadline]
    K --> L[Publish Job]
    L --> M[Job Sent to Partner]
    
    E --> N{Job Status Filter}
    N -->|Pending| O[View Pending Jobs]
    N -->|In Progress| P[View Active Jobs]
    N -->|Completed| Q[View Completed Jobs]
    N -->|Awaiting Approval| R[Review Submissions]
    
    R --> S[View Job Details]
    S --> T[Review Photos & Documents]
    T --> U{Decision}
    
    U -->|Approve| V[Mark as Approved]
    U -->|Reject| W[Enter Rejection Reason]
    
    V --> X[Update ERP System]
    W --> Y[Send Rejection Notification]
    
    X --> Z[Generate Payment Report]
    
    F --> AA[Select Report Type]
    AA --> AB{Report Options}
    AB -->|Daily| AC[Daily Job Summary]
    AB -->|Monthly| AD[Monthly Analytics]
    AB -->|Partner Performance| AE[Partner Metrics]
    AB -->|Regional| AF[Region-wise Distribution]
    
    style A fill:#4CAF50,stroke:#2E7D32,color:#fff
    style B fill:#2196F3,stroke:#1565C0,color:#fff
    style V fill:#4CAF50,stroke:#2E7D32,color:#fff
    style W fill:#F44336,stroke:#C62828,color:#fff
            </div>
        </div>

        <h2>3. Data Flow Diagram</h2>
        <div class="diagram-container">
            <div class="mermaid">
graph LR
    A[Regional Office] -->|Job Request| B[ERP System]
    B -->|Job Data| C[Backend API]
    C -->|Job Assignment| D[Mobile App]
    
    D -->|Job Acceptance| C
    D -->|Job Completion + Media| C
    
    C -->|Store Files| E[Media Storage]
    C -->|Job Updates| F[Admin Dashboard]
    
    F -->|Approval/Rejection| C
    C -->|Status Update| B
    C -->|Status Update| G[CRM System]
    
    C -->|Notifications| H[Notification Service]
    H -->|Push Notifications| D
    H -->|Email/SMS| I[Partners & Admins]
    
    B -->|Payment Data| J[Payment System]
    J -->|Earnings| D
    
    style B fill:#FF9800,stroke:#E65100,color:#fff
    style C fill:#2196F3,stroke:#1565C0,color:#fff
    style E fill:#9C27B0,stroke:#6A1B9A,color:#fff
    style H fill:#00BCD4,stroke:#00838F,color:#fff
            </div>
        </div>

        <h2>4. Authentication Flow</h2>
        <div class="diagram-container">
            <div class="mermaid">
sequenceDiagram
    participant U as User
    participant A as Mobile App/Dashboard
    participant API as Backend API
    participant DB as Database
    participant ERP as ERP System
    
    U->>A: Enter Credentials
    A->>API: POST /auth/login
    API->>DB: Validate Credentials
    DB-->>API: User Data
    API->>API: Generate JWT Token
    API-->>A: Return Token + User Info
    A->>A: Store Token Locally
    A-->>U: Show Dashboard
    
    Note over U,A: Subsequent Requests
    U->>A: Access Protected Resource
    A->>API: Request with JWT Token
    API->>API: Verify Token
    API->>DB: Fetch Data
    DB-->>API: Return Data
    API-->>A: Return Response
    A-->>U: Display Data
            </div>
        </div>

        <h2>5. Job Lifecycle State Machine</h2>
        <div class="diagram-container">
            <div class="mermaid">
stateDiagram-v2
    [*] --> Created: Job logged in ERP
    Created --> Assigned: Admin assigns to partner
    Assigned --> Published: Job sent to mobile app
    Published --> Accepted: Partner accepts job
    Published --> Reassigned: Partner declines
    Reassigned --> Published: Assign to new partner
    
    Accepted --> InProgress: Partner starts work
    InProgress --> Submitted: Partner submits completion
    Submitted --> UnderReview: Admin reviewing
    
    UnderReview --> Approved: Admin approves
    UnderReview --> Rejected: Admin rejects
    
    Rejected --> Submitted: Partner resubmits
    Rejected --> Disputed: Partner disputes
    Disputed --> UnderReview: Admin re-reviews
    
    Approved --> ERPUpdated: Sync with ERP
    ERPUpdated --> PaymentProcessed: Payment prepared
    PaymentProcessed --> [*]: Job closed
    
    note right of Created
        Initial state when
        job is created
    end note
    
    note right of Approved
        Final approval triggers
        ERP update and payment
    end note
            </div>
        </div>

        <h2>6. System Architecture Diagram</h2>
        <div class="diagram-container">
            <div class="mermaid">
graph TB
    subgraph "Client Layer"
        A[Tech-Lead Partner Mobile App<br/>Android/iOS]
        B[Admin Web Dashboard<br/>React/Next.js]
    end
    
    subgraph "API Gateway"
        C[Backend API<br/>Node.js/Express]
        D[Authentication Service<br/>JWT/OAuth2]
    end
    
    subgraph "Business Logic Layer"
        E[Job Management Service]
        F[User Management Service]
        G[Notification Service]
        H[File Upload Service]
        I[Reporting Service]
    end
    
    subgraph "Data Layer"
        J[(PostgreSQL/MySQL<br/>Main Database)]
        K[Media Storage<br/>AWS S3/Cloud Storage]
        L[Cache Layer<br/>Redis]
    end
    
    subgraph "External Systems"
        M[ERP System<br/>REST API]
        N[CRM System<br/>REST API]
        O[SMS/Email Gateway]
    end
    
    A --> C
    B --> C
    C --> D
    D --> F
    
    C --> E
    C --> F
    C --> G
    C --> H
    C --> I
    
    E --> J
    F --> J
    G --> J
    H --> K
    I --> J
    
    E --> L
    F --> L
    
    E --> M
    E --> N
    G --> O
    
    style A fill:#4CAF50,stroke:#2E7D32,color:#fff
    style B fill:#2196F3,stroke:#1565C0,color:#fff
    style C fill:#FF9800,stroke:#E65100,color:#fff
    style J fill:#9C27B0,stroke:#6A1B9A,color:#fff
    style M fill:#F44336,stroke:#C62828,color:#fff
    style N fill:#F44336,stroke:#C62828,color:#fff
            </div>
        </div>

        <h2>7. Notification Flow</h2>
        <div class="diagram-container">
            <div class="mermaid">
sequenceDiagram
    participant S as System Event
    participant NS as Notification Service
    participant DB as Database
    participant PN as Push Notification
    participant Email as Email Service
    participant SMS as SMS Service
    
    S->>NS: Trigger Event (Job Assigned/Approved/etc)
    NS->>DB: Get User Preferences
    DB-->>NS: Notification Settings
    
    NS->>NS: Determine Channels
    
    par Send to Multiple Channels
        NS->>PN: Send Push Notification
        PN-->>NS: Delivery Status
    and
        NS->>Email: Send Email
        Email-->>NS: Delivery Status
    and
        NS->>SMS: Send SMS (if enabled)
        SMS-->>NS: Delivery Status
    end
    
    NS->>DB: Log Notification History
    DB-->>NS: Confirmation
            </div>
        </div>

        <h2>Key Insights</h2>
        <div class="info-box">
            <h4>Critical Paths</h4>
            <ul>
                <li><strong>Job Assignment Path:</strong> ERP â†’ Admin â†’ Partner (must be seamless)</li>
                <li><strong>Approval Path:</strong> Partner Submission â†’ Admin Review â†’ ERP Update</li>
                <li><strong>Notification Path:</strong> System Events â†’ Multi-channel delivery</li>
            </ul>
        </div>

        <div class="info-box">
            <h4>Integration Points</h4>
            <ul>
                <li><strong>ERP Integration:</strong> Job creation, status updates, payment processing</li>
                <li><strong>CRM Integration:</strong> Customer data, job history</li>
                <li><strong>Media Storage:</strong> Photo and document uploads</li>
                <li><strong>Notification Service:</strong> Real-time updates across all channels</li>
            </ul>
        </div>

        <div class="info-box">
            <h4>User Experience Focus</h4>
            <ul>
                <li><strong>Partner App:</strong> Simple, intuitive job card interface</li>
                <li><strong>Admin Dashboard:</strong> Comprehensive job tracking and approval workflow</li>
                <li><strong>Real-time Updates:</strong> Instant notifications for all status changes</li>
                <li><strong>Offline Support:</strong> Local storage for poor network areas</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#0066CC',
                primaryTextColor: '#fff',
                primaryBorderColor: '#004C99',
                lineColor: '#333',
                secondaryColor: '#FF6B35',
                tertiaryColor: '#10B981'
            }
        });
    </script>
</body>
</html>
